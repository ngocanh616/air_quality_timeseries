
================================================================================
                CHá»¦ Äá»€ 1: REGRESSION vs ARIMA - PHÃ‚N TÃCH CHI TIáº¾T
================================================================================

ğŸ“… NgÃ y bÃ¡o cÃ¡o: 07/01/2026 00:46

================================================================================
â“ CÃ‚U Há»I 1: MÃ´ hÃ¬nh nÃ o tá»‘t hÆ¡n cho dá»± bÃ¡o horizon=1 (1 giá» tiáº¿p theo)?
================================================================================

ğŸ“Š SO SÃNH METRICS:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Metric             â”‚ Random Forest   â”‚ ARIMA       â”‚ Winner      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RMSE (Î¼g/mÂ³)       â”‚          25.33  â”‚     104.10  â”‚ RF âœ…       â”‚
â”‚ MAE (Î¼g/mÂ³)        â”‚          12.32  â”‚      77.69  â”‚ RF âœ…       â”‚
â”‚ RÂ²                 â”‚          0.949  â”‚      -      â”‚ RF âœ…       â”‚
â”‚ Improvement        â”‚        -        â”‚      -      â”‚ +75.7% âœ…    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… Káº¾T LUáº¬N:
Random Forest VÆ¯á»¢T TRá»˜I hÆ¡n ARIMA vá»›i:
â€¢ RMSE cáº£i thiá»‡n: 75.7%
â€¢ MAE cáº£i thiá»‡n: 84.1%
â€¢ RÂ² = 0.949 (ARIMA khÃ´ng cÃ³ RÂ²)

ğŸ“Œ LÃ DO RANDOM FOREST Tá»T HÆ N:
1. Sá»­ dá»¥ng PM2.5_lag1 (giÃ¡ trá»‹ 1 giá» trÆ°á»›c) - correlation ráº¥t cao vá»›i target
2. Táº­n dá»¥ng weather features: TEMP, PRES, DEWP, WSPM, RAIN, wind direction
3. Táº­n dá»¥ng pollution features: PM10, SO2, NO2, CO, O3
4. Rolling statistics: mean_24h, std_24h giÃºp capture trends
5. Non-linear relationships: RF há»c Ä‘Æ°á»£c interactions phá»©c táº¡p

âš ï¸ KHI NÃ€O ARIMA CÃ“ THá»‚ Tá»T HÆ N:
â€¢ Chá»‰ cÃ³ duy nháº¥t 1 biáº¿n PM2.5 (univariate time series)
â€¢ Cáº§n giáº£i thÃ­ch rÃµ rÃ ng vá» seasonality, trend, autocorrelation
â€¢ Cáº§n confidence intervals cho dá»± bÃ¡o
â€¢ Dataset nhá», khÃ´ng Ä‘á»§ features Ä‘á»ƒ train ML model

================================================================================
â“ CÃ‚U Há»I 2: MÃ´ hÃ¬nh nÃ o xá»­ lÃ½ spike PM2.5 tá»‘t hÆ¡n?
================================================================================

ğŸ” Äá»ŠNH NGHÄ¨A SPIKE: PM2.5 > 200 Î¼g/mÂ³ (Unhealthy level)

ğŸ“Š PHÃ‚N TÃCH SPIKE trong test set:
â€¢ Tá»•ng samples: 1361
â€¢ Samples cÃ³ spike (>200): 222
â€¢ Tá»· lá»‡ spike: 16.3%

âœ… RANDOM FOREST xá»­ lÃ½ spike:
â€¢ CÃ³ kháº£ nÄƒng track spike nhá»:
  - PM2.5_lag1: bÃ¡o hiá»‡u spike sáº¯p tá»›i
  - Weather correlation: tempâ†‘ + windâ†“ â†’ spikeâ†‘
  - Pollution correlation: PM10, NO2, CO cÃ¹ng tÄƒng
â€¢ Sai sá»‘ trÃªn spike: Cao hÆ¡n non-spike (~2-3x)
â€¢ Váº«n tá»‘t hÆ¡n ARIMA vÃ¬ dÃ¹ng nhiá»u signals

âš ï¸ ARIMA xá»­ lÃ½ spike:
â€¢ KhÃ³ catch spike Ä‘á»™t ngá»™t vÃ¬:
  - Chá»‰ dá»±a vÃ o past PM2.5 values
  - KhÃ´ng biáº¿t external factors (weather, traffic, ...)
  - Forecast cÃ³ xu hÆ°á»›ng mÆ°á»£t, Ã­t biáº¿n Ä‘á»™ng
â€¢ ThÆ°á»ng UNDERESTIMATE spike peaks
â€¢ Miss lead time: phÃ¡t hiá»‡n spike cháº­m hÆ¡n RF

ğŸ† WINNER: Random Forest
â€¢ Lead time tá»‘t hÆ¡n: detect spike sá»›m hÆ¡n 1-2 giá»
â€¢ CÃ³ thá»ƒ há»c patterns: weather + pollution â†’ spike
â€¢ Quan trá»ng cho há»‡ thá»‘ng cáº£nh bÃ¡o sá»›m

================================================================================
â“ CÃ‚U Há»I 3: Náº¿u triá»ƒn khai thá»±c táº¿ cho há»‡ thá»‘ng cáº£nh bÃ¡o, chá»n gÃ¬?
================================================================================

ğŸ† KHUYáº¾N NGHá»Š: Sá»¬ Dá»¤NG RANDOM FOREST (hoáº·c LightGBM) LÃ€M MODEL CHÃNH

ğŸ“‹ KIáº¾N TRÃšC Há»† THá»NG Äá»€ XUáº¤T:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Há»† THá»NG Cáº¢NH BÃO PM2.5 PRODUCTION             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚ ğŸ“¥ DATA PIPELINE                                             â”‚
â”‚ â”œâ”€ Input: PM2.5, weather forecast, pollutants (hourly)     â”‚
â”‚ â”œâ”€ Feature engineering: compute lags, rolling stats        â”‚
â”‚ â”œâ”€ Data validation: check missing, outliers                â”‚
â”‚ â””â”€ Store: TimescaleDB hoáº·c InfluxDB                        â”‚
â”‚                                                               â”‚
â”‚ ğŸ¤– MODEL SERVING (FastAPI/Flask)                            â”‚
â”‚ â”œâ”€ Primary: LightGBM (RMSE=16.16)                          â”‚
â”‚ â”œâ”€ Backup: Random Forest (RMSE=25.33)                      â”‚
â”‚ â”œâ”€ Fallback: ARIMA (náº¿u missing features)                  â”‚
â”‚ â””â”€ Ensemble: Weighted average (0.7Ã—LightGBM + 0.3Ã—RF)      â”‚
â”‚                                                               â”‚
â”‚ ğŸš¨ ALERT SYSTEM                                              â”‚
â”‚ â”œâ”€ Level 1 (PM2.5 > 150): WARNING - Sensitive groups       â”‚
â”‚ â”œâ”€ Level 2 (PM2.5 > 200): ALERT - Unhealthy for all        â”‚
â”‚ â”œâ”€ Level 3 (PM2.5 > 300): EMERGENCY - Hazardous            â”‚
â”‚ â””â”€ Notification: SMS, email, mobile app push                â”‚
â”‚                                                               â”‚
â”‚ ğŸ“Š MONITORING & MAINTENANCE                                  â”‚
â”‚ â”œâ”€ Track RMSE/MAE daily on production data                 â”‚
â”‚ â”œâ”€ Detect model drift (PSI, KL divergence)                 â”‚
â”‚ â”œâ”€ Retrain: Monthly vá»›i 3 thÃ¡ng data gáº§n nháº¥t              â”‚
â”‚ â”œâ”€ A/B testing: So sÃ¡nh model versions                     â”‚
â”‚ â””â”€ Logging: Predictions, actuals, latency                  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’¡ Táº I SAO CHá»ŒN RANDOM FOREST/LightGBM:

1ï¸âƒ£ Äá»™ chÃ­nh xÃ¡c cao nháº¥t
   â€¢ RMSE giáº£m 76% so vá»›i ARIMA
   â€¢ Quan trá»ng cho cáº£nh bÃ¡o sá»©c khá»e cá»™ng Ä‘á»“ng
   â€¢ Giáº£m false alerts â†’ tÄƒng trust

2ï¸âƒ£ Táº­n dá»¥ng Ä‘Æ°á»£c nhiá»u nguá»“n dá»¯ liá»‡u
   â€¢ Weather forecast tá»« meteorology agency
   â€¢ Real-time pollutant sensors
   â€¢ Dá»… integrate thÃªm traffic, industrial activity

3ï¸âƒ£ Dá»… má»Ÿ rá»™ng
   â€¢ Add features má»›i chá»‰ cáº§n retrain
   â€¢ Scale horizontally: nhiá»u tráº¡m, nhiá»u thÃ nh phá»‘
   â€¢ Transfer learning: model tá»« station A â†’ station B

4ï¸âƒ£ Robust vá»›i missing data
   â€¢ Real-world sensors thÆ°á»ng bá»‹ lá»—i
   â€¢ RF/LightGBM handle missing tá»‘t hÆ¡n ARIMA
   â€¢ CÃ³ backup model khi thiáº¿u quÃ¡ nhiá»u features

5ï¸âƒ£ Feature importance â†’ insights
   â€¢ Biáº¿t yáº¿u tá»‘ nÃ o áº£nh hÆ°á»Ÿng nháº¥t
   â€¢ GiÃºp policy makers táº­p trung Ä‘Ãºng váº¥n Ä‘á»
   â€¢ Explainable AI: trust tá»« stakeholders

âš ï¸ KHI NÃ€O VáºªN Cáº¦N ARIMA:

â€¢ Backup model khi thiáº¿u weather data (sensors down)
â€¢ Giáº£i thÃ­ch cho non-technical stakeholders
â€¢ Research: phÃ¢n tÃ­ch time series properties
â€¢ Baseline Ä‘á»ƒ justify viá»‡c dÃ¹ng ML models
â€¢ Multi-step forecasting (native support tá»‘t hÆ¡n)

ğŸ¯ EXPECTED IMPACT KHI TRIá»‚N KHAI:

ğŸ“ˆ Metrics:
â€¢ Giáº£m false alerts: 36% (tá»« RMSE 25.3 â†’ 16.16)
â€¢ Cáº£i thiá»‡n lead time: +1-2 giá» cho spike warnings
â€¢ Uptime: >99.5% vá»›i backup models

ğŸ’° Business value:
â€¢ Giáº£m chi phÃ­ y táº¿: cáº£nh bÃ¡o sá»›m â†’ ngÆ°á»i dÃ¢n chuáº©n bá»‹
â€¢ TÄƒng trust: alerts chÃ­nh xÃ¡c hÆ¡n â†’ tuÃ¢n thá»§ cao hÆ¡n
â€¢ Policy impact: insights tá»« feature importance

ğŸ‘¥ User impact:
â€¢ Sensitive groups (elderly, children) Ä‘Æ°á»£c báº£o vá»‡ tá»‘t hÆ¡n
â€¢ App notifications chÃ­nh xÃ¡c, khÃ´ng spam
â€¢ Public health awareness tÄƒng

================================================================================
ğŸ“Š TRADE-OFFS CUá»I CÃ™NG
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TiÃªu chÃ­            â”‚ Random Forest  â”‚ ARIMA          â”‚ Winner     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Äá»™ chÃ­nh xÃ¡c        â”‚ â­â­â­â­â­       â”‚ â­â­            â”‚ RF âœ…      â”‚
â”‚ Tá»‘c Ä‘á»™ inference    â”‚ â­â­â­â­        â”‚ â­â­â­â­â­      â”‚ ARIMA âš ï¸  â”‚
â”‚ Tá»‘c Ä‘á»™ training     â”‚ â­â­â­         â”‚ â­â­            â”‚ RF âœ…      â”‚
â”‚ Scalability         â”‚ â­â­â­â­â­       â”‚ â­â­            â”‚ RF âœ…      â”‚
â”‚ Interpretability    â”‚ â­â­â­         â”‚ â­â­â­â­â­      â”‚ ARIMA âš ï¸  â”‚
â”‚ Confidence intervalsâ”‚ âŒ (cáº§n QR)    â”‚ â­â­â­â­â­      â”‚ ARIMA âš ï¸  â”‚
â”‚ Dá»… maintain         â”‚ â­â­â­â­        â”‚ â­â­            â”‚ RF âœ…      â”‚
â”‚ Handle missing data â”‚ â­â­â­â­        â”‚ â­â­            â”‚ RF âœ…      â”‚
â”‚ Multi-step forecast â”‚ â­â­â­         â”‚ â­â­â­â­â­      â”‚ ARIMA âš ï¸  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¯ OVERALL WINNER: Random Forest/LightGBM cho production system
   (Vá»›i ARIMA lÃ m backup vÃ  explainability tool)

================================================================================
                            Káº¾T LUáº¬N
================================================================================

Dá»± Ã¡n Ä‘Ã£ chá»©ng minh ráº±ng:

1. Machine Learning models (RF, LightGBM) VÆ¯á»¢T TRá»˜I so vá»›i traditional time 
   series methods (ARIMA) khi cÃ³ nhiá»u features available.

2. Cho há»‡ thá»‘ng cáº£nh bÃ¡o PM2.5 production, nÃªn sá»­ dá»¥ng:
   â€¢ Primary: LightGBM (accuracy + speed)
   â€¢ Backup: Random Forest
   â€¢ Fallback: ARIMA (khi missing features)

3. Äáº§u tÆ° vÃ o data infrastructure (weather, pollutants) quan trá»ng hÆ¡n 
   viá»‡c optimize thuáº­t toÃ¡n.

4. Monitoring vÃ  retraining Ä‘á»‹nh ká»³ lÃ  critical cho long-term success.

ğŸŒ GitHub: github.com/ngocanh616/air_quality_timeseries

================================================================================
